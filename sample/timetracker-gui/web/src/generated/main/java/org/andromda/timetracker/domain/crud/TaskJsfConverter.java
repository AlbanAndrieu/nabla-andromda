// license-header java merge-point
// Generated by andromda-jsf cartridge (crud\EntityConverter.java.vsl) DO NOT EDIT!
package org.andromda.timetracker.domain.crud;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import org.andromda.timetracker.ManageableServiceLocator;

/**
 * Handles conversion of the entity id to a String.
 */
public class TaskJsfConverter
    implements Converter
{
    /**
     * @see Converter#getAsString(FacesContext, UIComponent, Object)
     */
    public String getAsString(
        FacesContext context,
        UIComponent component,
        Object value)
        throws ConverterException
    {
        if(value == null)
            return "";

        final TaskValueObject vo;
        try {
            final Long id;
            if(value instanceof String)
                id = Long.valueOf((String)value);
            else
                id = (Long)value;

            vo = ManageableServiceLocator.instance().getTaskManageableService().readById(id);
        } catch (Exception e) {
            e.printStackTrace();
            return ("Failed to locate object.");
        }
        return vo.getName();
    }

    /**
     * @see Converter#getAsObject(FacesContext, UIComponent, String)
     */
    public Object getAsObject(
        FacesContext context,
        UIComponent component,
        String value)
        throws ConverterException
    {
        throw new UnsupportedOperationException();
    }
}